#:kivy 2.2.1
#:include common.kv
#:include styles.kv

<DropDownPanel@BoxLayout+BasePanelBG>
    orientation: 'vertical'
    size_hint: None, None
    size: self.minimum_width, self.minimum_height


<GenerationPanel@BoxLayout+BasePanelBG>
    #Exposing widgets
    cfg_slider: cfg_slider
    steps_slider: steps_slider
    text_prompt: text_prompt
    text_negative_prompt: text_negative_prompt
    width_text: width_text.input_field
    height_text: height_text.input_field
    highres_checkbox: highres_checkbox
    sampler_button: sampler_button
    upscaler_button: upscaler_button
    hrscale_text: hrscale_text.input_field
    denoising_slider: denoising_slider
    batch_text: batch_text

    spacing:3
    padding:3
    BoxLayout:
        size_hint_x: 2
        orientation: 'vertical'
        TextInput:
            id: text_prompt
        TextInput:
            id: text_negative_prompt
    StackLayout:
        spacing:3
        TextSlider:
            id: steps_slider
            title: "Steps:"
            min_value: 1
            max_value: 40
            value: 20
        TextSlider:
            id: cfg_slider
            title: "Cfg scale:"
            min_value: 1
            max_value: 20
            value: 4.5
        LabeledFloatText: #width
            id: width_text
            title: 'Width:'
            allow_decimal: False
        LabeledFloatText: #height
            id: height_text
            title: 'Height:'
            allow_decimal: False
        TextDropdown: #sampler_name
            id: sampler_button
            size: dp(100), dp(30)
            size_hint: None, None
            text: 'Euler a'
        #Hi res upscale group
        CheckBox: #enable hi res
            id: highres_checkbox
            height: dp(40)
            size_hint: None, None
            text: 'height'
        LabeledFloatText: #hr scale
            id: hrscale_text
            title: 'Upscale:'
            allow_decimal: True
        TextDropdown: #upscaler
            id: upscaler_button
            size: dp(100), dp(30)
            size_hint: None, None
            text: 'Nearest'
        TextSlider:
            size_hint_x: None
            width: dp(300)
            id: denoising_slider
            title: "Denoise:"
            min_value: 0
            max_value: 1
            value: 0.5
        LabeledFloatText: #batch
            id: batch_text
            title: 'Upscale:'
            allow_decimal: False

    Button:
        size_hint: None, None
        width: dp(160)
        height: dp(45)

        on_release: root.on_generate_press()
        text: 'Generate'
