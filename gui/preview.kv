#:kivy 2.2.1
#:include styles.kv

<ImagePreviewPanel@AnchorLayout+BasePanelBG>
<ImagesPanel@ScrollView+BasePanelBG>

<Thumbnail@ButtonBehavior+BoxLayout>
    file_name: file_name
    image_thumb: image_thumb
    size_hint_y: None
    height: self.minimum_height
    orientation: 'vertical'

    Image:
        id: image_thumb
        fit_mode: 'contain'
        size_hint_y: None
        width: 200

    Label:
        id: file_name
        text: ''
        size_hint_y: None
        size: self.texture_size

<Preview@BoxLayout>:
    orientation: 'horizontal'
    spacing: 3
    file_list: file_list
    big_image: big_image
    scatter_container: scatter_container
    image_panel: image_panel

    ImagePreviewPanel:
        id: image_panel
        canvas.before:
            ScissorPush:
                x: self.pos[0]
                y: self.pos[1]
                width: self.size[0]
                height: self.size[1]
        canvas.after:
            ScissorPop:
        ScatterLayout:
            id: scatter_container
            size: big_image.texture_size
            size_hint: None, None
            Image:
                id: big_image

    ImagesPanel:
        do_scroll_y: True
        size_hint_x: None
        width: 200
        BoxLayout:
            id: file_list
            orientation: 'vertical'
            size_hint_y: None
            height: self.minimum_height

